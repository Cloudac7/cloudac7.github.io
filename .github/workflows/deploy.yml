name: Deploy to Github Pages

on:
    push:
        branches: [master]
    pull_request:
        branches: [master]

jobs:
  build:
    runs-on: ubuntu-latest # è¿è¡Œç¯å¢ƒä¸ºæœ€æ–°ç‰ˆ Ubuntu
    name: auto deploy
    steps:
    # 1. è·å–æºç 
    - name: Checkout
      uses: actions/checkout@v3 # ä½¿ç”¨ actions/checkout@v3
      with: # æ¡ä»¶
        submodules: true # Checkout private submodules(themes or something else). å½“æœ‰å­æ¨¡å—æ—¶åˆ‡æ¢åˆ†æ”¯ï¼Ÿ
    # 2. é…ç½®ç¯å¢ƒ
    - name: Setup Node.js environment
      uses: actions/setup-node@master
      with:
        node-version: "22.x" # æŒ‡å®š Node.js ç‰ˆæœ¬ä¸º 22.x
    # 3. ç”Ÿæˆé™æ€æ–‡ä»¶
    - name: Generate Public Files
      run: |
        npm i
        npm install hexo-cli -g
        hexo clean && hexo generate
    # 4. éƒ¨ç½²åˆ° GitHub ä»“åº“
    - name: Deploy ğŸš€
      uses: JamesIves/github-pages-deploy-action@4.1.4
      with:
        branch: gh-pages
        folder: public
        clean: true
        single-commit: true